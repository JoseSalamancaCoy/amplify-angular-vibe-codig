<div [class]="containerClasses">
  <!-- Label -->
  <label *ngIf="label" class="input-label" [for]="inputId">
    {{ label }}
    <span *ngIf="required" class="input-label__required" aria-label="Required field">*</span>
  </label>

  <!-- Input Field -->
  <div class="input-wrapper">
    <input
      [id]="inputId"
      [type]="type"
      [class]="inputClasses"
      [placeholder]="placeholder"
      [value]="value"
      [disabled]="disabled"
      [readonly]="readonly"
      [required]="required"
      [attr.maxlength]="maxLength"
      [attr.minlength]="minLength"
      [pattern]="pattern"
      [autocomplete]="autocomplete"
      [attr.aria-label]="ariaLabel || label"
      [attr.aria-describedby]="ariaDescribedBy"
      [attr.aria-invalid]="state === 'error'"
      (input)="onInput($event)"
      (blur)="onBlur($event)"
      (focus)="onFocus($event)"
    />
    
    <!-- State Icon -->
    <span *ngIf="state !== 'default'" class="input-icon" [class]="'input-icon--' + state">
      <!-- Success Icon -->
      <svg *ngIf="state === 'success'" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M6.5 12L2 7.5L3.5 6L6.5 9L12.5 3L14 4.5L6.5 12Z"/>
      </svg>
      
      <!-- Error Icon -->
      <svg *ngIf="state === 'error'" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zM9 12H7V7h2v5zM8 6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1z"/>
      </svg>
      
      <!-- Warning Icon -->
      <svg *ngIf="state === 'warning'" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1-.18.31.02.5.33.5h13.78c.31 0 .51-.19.33-.5s.18-.69 0-1L8.865 1.52zM9 12H7v-2h2v2zM9 9H7V6h2v3z"/>
      </svg>
    </span>
  </div>

  <!-- Help Text -->
  <div *ngIf="showHelp" 
       class="input-help" 
       [id]="helpId">
    {{ helpText }}
  </div>

  <!-- Error Message -->
  <div *ngIf="showError" 
       class="input-error" 
       [id]="errorId"
       role="alert">
    {{ errorMessage }}
  </div>
</div>
